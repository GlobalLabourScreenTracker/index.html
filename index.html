<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Global Labour Screen Tracker</title>
<style>
body {
font-family: Arial, sans-serif;
max-width: 1200px;
margin: 0 auto;
padding: 20px;
background-color: #f5f5f5;
}
h1 {
text-align: center;
color: #333;
}
.videos-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 20px;
margin-top: 30px;
}
.video-card {
background: white;
border-radius: 8px;
overflow: hidden;
box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.video-card iframe {
width: 100%;
height: 200px;
border: none;
}
.video-info {
padding: 15px;
}
.video-title {
font-size: 14px;
font-weight: bold;
margin: 0;
color: #333;
}
.loading {
text-align: center;
padding: 50px;
font-size: 18px;
color: #666;
}
.error {
background: #ffebee;
color: #c62828;
padding: 15px;
border-radius: 8px;
margin: 20px 0;
text-align: center;
}
.update-info {
background: #e3f2fd;
padding: 10px 15px;
border-radius: 8px;
margin: 20px 0;
text-align: center;
font-size: 14px;
color: #1565c0;
border-left: 4px solid #2196f3;
}
</style>
</head>
<body>
<h1>Global Labour Screen Tracker</h1>

<div id="loading" class="loading">Loading videos...</div>
<div id="error" class="error" style="display:none;"></div>
<div id="videos" class="videos-grid"></div>

<script>
// âš ï¸ ADD YOUR YOUTUBE API KEY HERE
const API_KEY = 'AIzaSyBCQeWO5lhHka-2hvUeNyG2Kojqnum8eRc';

// CACHED VIDEO IDs - These are updated manually each month
const CACHED_VIDEOS = [];

// Search queries in different languages for "day in the life" worker videos
const searchQueries = [
'day in the life worker',
'a day in my life job',
'dÃ­a en la vida trabajo',
'un dÃ­a en mi vida trabajo',
'dÃ­a de trabajo en mi vida',
'mi trabajo diario',
'journÃ©e dans la vie travail',
'une journÃ©e de travail',
'journÃ©e de travail en Afrique',
'mon travail quotidien',
'Tag im Leben Arbeit',
'ä»•äº‹ã®ä¸€æ—¥',
'å·¥ä½œä¸­çš„ä¸€å¤©',
'æˆ‘çš„å·¥ä½œæ—¥å¸¸',
'èŒä¸šæ—¥å¸¸',
'dia na vida trabalho',
'rotina de trabalho',
'Ð´ÐµÐ½ÑŒ Ð¸Ð· Ð¶Ð¸Ð·Ð½Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°',
'Ð¼Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‡Ð¸Ð¹ Ð´ÐµÐ½ÑŒ',
'giorno nella vita lavoro',
'ì§ìž¥ì¸ í•˜ë£¨',
'ì¼ìƒ ë¸Œì´ë¡œê·¸ ì§ìž¥',
'ÙŠÙˆÙ… ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ø¹Ù…Ù„',
'dag in het leven werk',
'dzieÅ„ w Å¼yciu praca',
'how I dey work',
'my work for Nigeria',
'à¸§à¸±à¸™à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸‰à¸±à¸™',
'à¤à¤• à¤¦à¤¿à¤¨ à¤®à¥‡à¤°à¥€ à¤¨à¥Œà¤•à¤°à¥€',
'mijn dagelijks werk',
'Ï„Î· Î´Î¿Ï…Î»ÎµÎ¹Î¬ Î¼Î¿Ï…',
'iÅŸimde bir gÃ¼n',
'pekerjaan sehari-hari',
'viá»‡c lÃ m hÃ ng ngÃ y'
];

async function searchYouTube(query, maxResults = 10) {
const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&maxResults=${maxResults}&key=${API_KEY}`;

try {
const response = await fetch(url);
if (!response.ok) {
throw new Error(`API Error: ${response.status}`);
}
const data = await response.json();
return data.items || [];
} catch (error) {
console.error('Search error:', error);
return [];
}
}

async function fetchNewVideos() {
console.log('Fetching new videos from YouTube API...');

// Use current timestamp for true randomness each time
const shuffledQueries = [...searchQueries].sort(() => Math.random() - 0.5);
const selectedQueries = shuffledQueries.slice(0, 10);  // Pick 10 random languages

console.log('Selected queries:', selectedQueries);

// Fetch videos from selected queries - GET EQUAL AMOUNTS FROM EACH
const allVideos = [];
for (const query of selectedQueries) {
console.log(`Searching for: ${query}`);
const videos = await searchYouTube(query, 10);  // Only 10 per language for balance

// Take first 5 videos from each language to ensure distribution
const selectedFromLanguage = videos.slice(0, 5);
allVideos.push(...selectedFromLanguage);

// Small delay to avoid rate limiting
await new Promise(resolve => setTimeout(resolve, 500));
}

console.log(`Fetched ${allVideos.length} videos total from ${selectedQueries.length} languages`);

// Remove duplicates
const uniqueVideos = Array.from(new Map(allVideos.map(v => [v.id.videoId, v])).values());

// Shuffle the results
const shuffledVideos = uniqueVideos.sort(() => Math.random() - 0.5);

// Take up to 48 videos (we should have ~50 from 10 languages Ã— 5 videos)
const selectedVideos = shuffledVideos.slice(0, 48);

console.log(`Displaying ${selectedVideos.length} videos`);
console.log('Languages used:', selectedQueries);

return selectedVideos.map(v => ({
videoId: v.id.videoId,
title: v.snippet.title
}));
}

function displayVideos(videos) {
document.getElementById('loading').style.display = 'none';
const container = document.getElementById('videos');
container.innerHTML = '';

videos.forEach(video => {
const videoCard = document.createElement('div');
videoCard.className = 'video-card';
videoCard.innerHTML = `
<iframe
src="https://www.youtube.com/embed/${video.videoId}?autoplay=1"
allowfullscreen>
</iframe>
<div class="video-info">
<p class="video-title">${video.title}</p>
</div>
`;
container.appendChild(videoCard);
});
}

async function loadVideos() {
try {
// Check if we have cached videos
if (CACHED_VIDEOS.length === 48) {
console.log('Using cached videos');
displayVideos(CACHED_VIDEOS);
} else {
// No cached videos - fetch new ones
console.log('No cached videos found, fetching from API...');

const newVideos = await fetchNewVideos();
displayVideos(newVideos);

// Log the cache data to copy
console.log('='.repeat(80));
console.log('ðŸ“‹ COPY THIS INTO YOUR CODE:');
console.log('='.repeat(80));
console.log(`const CACHED_VIDEOS = ${JSON.stringify(newVideos, null, 2)};`);
console.log('='.repeat(80));
}
} catch (error) {
document.getElementById('loading').style.display = 'none';
document.getElementById('error').style.display = 'block';
document.getElementById('error').textContent = 'Error loading videos: ' + error.message;
console.error('Error:', error);
}
}

// Load videos when page loads
loadVideos();
</script>
</body>
</html>
